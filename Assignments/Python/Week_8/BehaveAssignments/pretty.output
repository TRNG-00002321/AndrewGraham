@login @ui
Feature: Login UI Tests # features/login_ui.feature:2
  As a user
  I want to log in to the application
  So that I can access secure features
  @login @ui
  Feature: Login UI Tests  # features/login_ui.feature:2

  @smoke @positive
  Scenario: Successful login redirects to secure area     # features/login_ui.feature:11
    Given the browser is on the login page                # features/steps/login_ui_steps.py:15
    When I enter username "tomsmith"                      # features/steps/login_ui_steps.py:30
    And I enter password "SuperSecretPassword!"           # features/steps/login_ui_steps.py:36
    And I click the login button                          # features/steps/login_ui_steps.py:42
    Then I should be on the secure area page              # features/steps/login_ui_steps.py:54
      ASSERT FAILED: Should be on secure area

    And I should see message containing "You logged into" # None
----
CAPTURED LOG: before_scenario
LOG_INFO:WDM: ====== WebDriver manager ======
LOG_INFO:WDM: Get LATEST chromedriver version for google-chrome
LOG_INFO:WDM: Get LATEST chromedriver version for google-chrome
LOG_INFO:WDM: Driver [/Users/andrew/.wdm/drivers/chromedriver/mac64/143.0.7499.169/chromedriver-mac-arm64/chromedriver] found in cache
---- CAPTURED_SCENARIO_OUTPUT_END ----

  @negative
  Scenario: Invalid password shows error                         # features/login_ui.feature:19
    Given the browser is on the login page                       # features/steps/login_ui_steps.py:15
    When I enter username "tomsmith"                             # features/steps/login_ui_steps.py:30
    And I enter password "wrongpassword"                         # features/steps/login_ui_steps.py:36
    And I click the login button                                 # features/steps/login_ui_steps.py:42
    Then I should remain on the login page                       # features/steps/login_ui_steps.py:61
    And I should see error containing "Your password is invalid" # features/steps/login_ui_steps.py:82

  @negative
  Scenario: Invalid username shows error                         # features/login_ui.feature:27
    Given the browser is on the login page                       # features/steps/login_ui_steps.py:15
    When I enter username "invaliduser"                          # features/steps/login_ui_steps.py:30
    And I enter password "SuperSecretPassword!"                  # features/steps/login_ui_steps.py:36
    And I click the login button                                 # features/steps/login_ui_steps.py:42
    Then I should remain on the login page                       # features/steps/login_ui_steps.py:61
    And I should see error containing "Your username is invalid" # features/steps/login_ui_steps.py:82

  @logout
  Scenario: Logout returns to login page                 # features/login_ui.feature:35
    Given the browser is on the login page               # features/steps/login_ui_steps.py:15
    Given I am logged in as "tomsmith"                   # features/steps/login_ui_steps.py:21
      ASSERT FAILED: Login should succeed

    When I click logout                                  # None
    Then I should be on the login page                   # None
    And I should see message containing "You logged out" # None
----
CAPTURED LOG: before_scenario
LOG_INFO:WDM: ====== WebDriver manager ======
LOG_INFO:WDM: Get LATEST chromedriver version for google-chrome
LOG_INFO:WDM: Get LATEST chromedriver version for google-chrome
LOG_INFO:WDM: Driver [/Users/andrew/.wdm/drivers/chromedriver/mac64/143.0.7499.169/chromedriver-mac-arm64/chromedriver] found in cache
---- CAPTURED_SCENARIO_OUTPUT_END ----

@registration
Feature: User Registration # features/registration.feature:2
  As a new user
  I want to register for an account
  So that I can access the application features
  @smoke @positive
  Scenario: Successful registration with valid details  # features/registration.feature:8
    Given I am on the registration page                 # features/steps/registration_steps.py:45
    When I enter my name "John Doe"                     # features/steps/registration_steps.py:52
    And I enter my email "john.doe@example.com"         # features/steps/registration_steps.py:59
    And I enter my password "SecurePass123!"            # features/steps/registration_steps.py:65
    And I confirm my password "SecurePass123!"          # features/steps/registration_steps.py:71
    And I click the register button                     # features/steps/registration_steps.py:77
    Then I should see a success message                 # features/steps/registration_steps.py:84
    And I should receive a verification email           # features/steps/registration_steps.py:90

  @negative
  Scenario: Registration fails with mismatched passwords  # features/registration.feature:19
    Given I am on the registration page                   # features/steps/registration_steps.py:45
    When I enter my name "Jane Doe"                       # features/steps/registration_steps.py:52
    And I enter my email "jane.doe@example.com"           # features/steps/registration_steps.py:59
    And I enter my password "SecurePass123!"              # features/steps/registration_steps.py:65
    And I confirm my password "DifferentPass456!"         # features/steps/registration_steps.py:71
    And I click the register button                       # features/steps/registration_steps.py:77
    Then I should see an error "Passwords do not match"   # features/steps/registration_steps.py:97

  @negative
  Scenario: Registration fails with invalid email     # features/registration.feature:29
    Given I am on the registration page               # features/steps/registration_steps.py:45
    When I enter my name "Bob Smith"                  # features/steps/registration_steps.py:52
    And I enter my email "invalid-email"              # features/steps/registration_steps.py:59
    And I enter my password "SecurePass123!"          # features/steps/registration_steps.py:65
    And I confirm my password "SecurePass123!"        # features/steps/registration_steps.py:71
    And I click the register button                   # features/steps/registration_steps.py:77
    Then I should see an error "Invalid email format" # features/steps/registration_steps.py:97

  @data-driven
  Scenario Outline: Password validation rules -- @1.1                     # features/registration.feature:47
    Given I am on the registration page                                   # features/steps/registration_steps.py:45
    When I enter my password "short"                                      # features/steps/registration_steps.py:65
    And I click the register button                                       # features/steps/registration_steps.py:77
    Then I should see validation message "Password must be 8+ characters" # features/steps/registration_steps.py:104

  @data-driven
  Scenario Outline: Password validation rules -- @1.2                     # features/registration.feature:48
    Given I am on the registration page                                   # features/steps/registration_steps.py:45
    When I enter my password "nodigits"                                   # features/steps/registration_steps.py:65
    And I click the register button                                       # features/steps/registration_steps.py:77
    Then I should see validation message "Password must contain a number" # features/steps/registration_steps.py:104

  @data-driven
  Scenario Outline: Password validation rules -- @1.3                      # features/registration.feature:49
    Given I am on the registration page                                    # features/steps/registration_steps.py:45
    When I enter my password "NOLOWERCASE2"                                # features/steps/registration_steps.py:65
    And I click the register button                                        # features/steps/registration_steps.py:77
    Then I should see validation message "Password must contain lowercase" # features/steps/registration_steps.py:104

